parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"b8tB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listButtonTemplate=exports.formButtonTemplate=exports.listItemTemplate=exports.listTemplate=exports.formTemplate=void 0;var t=function(){return'<div class="bookForm">\n        <h2 class="ui header">\n            <i class="circular book icon"></i>Book editor\n        </h2>\n        <form class="ui form segment" method="post">\n            <input type="text" name="id" hidden></input>\n            <div class="field">\n                <label>Book title</label>\n                <input\n                    type="text"\n                    name="title"\n                    placeholder="Book title"\n                    required\n                ></input>\n            </div>\n            <div class="field">\n                <label>Author name</label>\n                <input\n                    type="text"\n                    name="author"\n                    placeholder="Author name"\n                    required\n                ></input>\n            </div>\n            <div class="ui divider"></div>\n            <div class="ui buttons"></div>\n        </form>\n    </div>'};exports.formTemplate=t;var e=function(){return'<div class="bookList">\n        <h2 class="ui header">\n         <i class="circular list icon"></i>Book list         \n        </h2>\n        <div class="ui segment">    \n            <div class="ui relaxed divided list"></div>\n        </div>\n    </div>'};exports.listTemplate=e;var i=function(){return'<div class="item" key="{{bookId}}">\n    <div class="right floated content buttons"></div>\n    <div class="content text">\n        <div class="header">{{bookTitle}}</div>\n        <i>{{bookAuthor}}</i>\n    </div>\n</div>'};exports.listItemTemplate=i;var n=function(){return'<button class="ui button {{classList}}" type="{{type}}">{{text}}</button>'};exports.formButtonTemplate=n;var s=function(){return'<div class="ui animated fade button basic {{classList}}">\n        <div class="hidden content">{{text}}</div>\n        <div class="visible content">\n            <i class="icon {{icon}}"></i>\n        </div>\n    </div>'};exports.listButtonTemplate=s;
},{}],"bC/8":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.elem=null,this.params=r,this.events=n,this.template="<h2>Null</h2>"}return r(t,[{key:"getElem",value:function(){return this.elem||this.render(),this.elem}},{key:"render",value:function(){var e=this.renderHtml();this.elem=e.body.firstChild}},{key:"renderHtml",value:function(){var e=this.template;for(var t in this.params)e=e.replace(new RegExp("{{".concat(t,"}}"),"g"),this.params[t]);return(new DOMParser).parseFromString(e,"text/html")}}]),t}();exports.default=n;
},{}],"JEhM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Component")),e=require("../../../templates");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(n){function o(t,n){var u;return r(this,o),(u=f(this,l(o).call(this,t,n))).template=(0,e.formButtonTemplate)(),u}return a(o,t.default),i(o,[{key:"render",value:function(){var t=this,e=this.renderHtml().body.firstElementChild;this.events.onClick&&(e.onclick=function(){return t.events.onClick()}),this.elem=e}}]),o}();exports.default=p;
},{"./Component":"bC/8","../../../templates":"b8tB"}],"Mlwk":[function(require,module,exports) {
module.exports={books:[{id:"1",title:"The Green Mile",author:"Stephen King"},{id:"2",title:"A Storm of Swords",author:"George R. R. Martin"},{id:"3",title:"The Count of Monte Cristo",author:"Alexandre Dumas"},{id:"4",title:"The Lord of the Rings",author:"John Ronald Reuel Tolkien"},{id:"5",title:"The Master and Margarita",author:"Mikhail Bulgakov"},{id:"6",title:"The Shawshank Redemption",author:"Stephen King"},{id:"7",title:"The Hound of the Baskervilles",author:"Arthur Conan Doyle"},{id:"8",title:"The Twelve Chairs",author:"Ilya Arnoldovich Ilf, Eugene Petrovich Petrov"}]};
},{}],"1m/B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){document.querySelector(".bookForm .ui.segment.form").classList.toggle("loading"),document.querySelector(".bookList .ui.segment").classList.toggle("loading")};exports.default=e;
},{}],"XDY4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBook=exports.deleteBook=exports.addBook=exports.updateBook=exports.fillBookForm=exports.allBooks=void 0;var t=r(require("./testData.json")),o=r(require("../functions/toggleLoading.js"));function r(t){return t&&t.__esModule?t:{default:t}}function e(t){return i(t)||a(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(t){if(Array.isArray(t)){for(var o=0,r=new Array(t.length);o<t.length;o++)r[o]=t[o];return r}}var u=function(){var o=localStorage.getItem("books");return o?JSON.parse(o):(localStorage.setItem("books",JSON.stringify(t.default.books)),(o=localStorage.getItem("books"))?JSON.parse(o):[])};exports.allBooks=u;var l=function(t){var o=d(t),r=Array.from(document.querySelectorAll(".bookForm input")),e=function(t){r.find(function(o){return o.attributes.name.value===t}).value=o[t]};for(var n in o)e(n)};exports.fillBookForm=l;var s=function(t){var o=u().map(function(o){return o.id===t.id?t:o});localStorage.setItem("books",JSON.stringify(o))};exports.updateBook=s;var f=function(t){var r=t.id,n=t.title,a=t.author,i=u();i.forEach(function(t){if(t.title===n&&t.author===a)throw alert("Такая книга уже есть в списке"),(0,o.default)(),Error("Book already exist")});var l={id:r,title:n,author:a};localStorage.setItem("books",JSON.stringify([].concat(e(i),[l])))};exports.addBook=f;var c=function(t){var o=u().filter(function(o){return o.id!==t});localStorage.setItem("books",JSON.stringify(o))};exports.deleteBook=c;var d=function(t){return u().find(function(o){return o.id===t})};exports.getBook=d;
},{"./testData.json":"Mlwk","../functions/toggleLoading.js":"1m/B"}],"KQeS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../db"),r=function(){var r=(0,e.allBooks)(),t=Math.random().toString(32).slice(2,8);return r.find(function(e){return e.id===t})&&(t=generateId()),t};exports.default=r;
},{"../db":"XDY4"}],"JlQx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Component")),e=require("../../../templates");function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(n){function r(t,n){var u;return o(this,r),(u=f(this,l(r).call(this,t,n))).template=(0,e.listButtonTemplate)(),u}return a(r,t.default),i(r,[{key:"render",value:function(){var t=this,e=this.renderHtml().body.firstElementChild;e.onclick=function(){return t.events.onClick()},this.elem=e}}]),r}();exports.default=s;
},{"./Component":"bC/8","../../../templates":"b8tB"}],"JZw7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../../templates"),t=l(require("../UI/Component")),o=l(require("../UI/ListButton")),n=require("../../db"),r=l(require("../../functions/toggleLoading")),u=l(require(".")),i=l(require("../BookForm"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(l){function c(t){var o;return f(this,c),(o=d(this,y(c).call(this,t))).template=(0,e.listItemTemplate)(),o}return b(c,t.default),a(c,[{key:"render",value:function(){var e=this.renderHtml().body.firstElementChild,t=e.querySelector(".right.buttons");t.appendChild(this.renderEditBtn(this.params.bookId)),t.appendChild(this.renderDeleteBtn(this.params.bookId)),this.elem=e}},{key:"renderEditBtn",value:function(e){var t=this;return new o.default({text:"Edit",classList:"blue",icon:"pencil",bookId:e},{onClick:function(){(0,n.fillBookForm)(e),t.toggleSelected()}}).getElem()}},{key:"renderDeleteBtn",value:function(e){return new o.default({text:"Delete",classList:"red",icon:"trash",bookId:e},{onClick:function(){(0,r.default)(),confirm("Are you sure you want to delete book?")||(0,r.default)(),(0,n.deleteBook)(e),u.default.deleteItem(e),i.default.clearForm(),setTimeout(function(){return(0,r.default)()},300)}}).getElem()}},{key:"toggleSelected",value:function(){c.unselectAllItems(),this.elem.classList.toggle("selected")}}],[{key:"unselectAllItems",value:function(){document.querySelectorAll(".bookList .ui.list .item.selected").forEach(function(e){return e.classList.remove("selected")})}}]),c}();exports.default=h;
},{"../../../templates":"b8tB","../UI/Component":"bC/8","../UI/ListButton":"JlQx","../../db":"XDY4","../../functions/toggleLoading":"1m/B",".":"0cqi","../BookForm":"T+3q"}],"0cqi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../../templates"),t=n(require("../UI/Component")),o=n(require("./BookItem")),r=require("../../db");function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,o){return t&&l(e.prototype,t),o&&l(e,o),e}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(n){function i(t){var o;return u(this,i),(o=c(this,d(i).call(this,t))).template=(0,e.listTemplate)(),o}return s(i,t.default),a(i,[{key:"render",value:function(){var e=this.renderHtml(),t=e.body.firstElementChild.querySelector(".ui.list");this.renderBooks(t),this.elem=e.body.firstChild}},{key:"renderBooks",value:function(e){var t=(0,r.allBooks)();if(!t.length){var n=document.createElement("h4");n.classList.add("empty"),n.innerText="Добавьте первую книгу",e.appendChild(n)}t.forEach(function(t){var r=t.id,n=t.title,i=t.author;e.appendChild(new o.default({bookId:r,bookTitle:n,bookAuthor:i}).getElem())})}}],[{key:"addItem",value:function(e){var t=e.id,r=e.title,n=e.author,i=document.querySelector(".bookList .ui.list"),u=i.querySelector(".empty");u&&i.removeChild(u),i.appendChild(new o.default({bookId:t,bookTitle:r,bookAuthor:n}).getElem())}},{key:"editItem",value:function(e){var t=e.id,o=e.title,r=e.author;Array.from(document.querySelectorAll(".bookList .ui.list .item")).forEach(function(e){e.attributes.key.value===t&&(e.querySelector(".text .header").innerText=o,e.querySelector(".text i").innerText=r)})}},{key:"deleteItem",value:function(e){var t=document.querySelector(".bookList .ui.list");if(Array.from(t.querySelectorAll(".item")).forEach(function(o){o.attributes.key.value===e&&t.removeChild(o)}),!t.childElementCount){var o=document.createElement("h4");o.classList.add("empty"),o.innerText="Добавьте первую книгу",t.appendChild(o)}}}]),i}();exports.default=p;
},{"../../../templates":"b8tB","../UI/Component":"bC/8","./BookItem":"JZw7","../../db":"XDY4"}],"T+3q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../../templates"),t=l(require("../UI/Component")),r=l(require("../UI/FormButton")),n=require("../../db"),o=l(require("../../functions/toggleLoading")),u=l(require("../../functions/generateID")),i=l(require("../BookList")),a=l(require("../BookList/BookItem"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(l){function c(t){var r;return f(this,c),(r=p(this,y(c).call(this,t))).template=(0,e.formTemplate)(),r}return b(c,t.default),d(c,[{key:"renderSubmitBtn",value:function(){return new r.default({text:"Save",classList:"positive",type:"submit"}).getElem()}},{key:"renderCancelBtn",value:function(){var e=this;return new r.default({text:"Cancel",classList:"",type:"button"},{onClick:function(){return e.clearForm()}}).getElem()}},{key:"renderBtnDivider",value:function(){var e=document.createElement("div");return e.classList.add("or"),e}},{key:"onFormSubmit",value:function(e){e.preventDefault(),(0,o.default)();var t={};if(Array.from(e.target.querySelectorAll("input")).forEach(function(e){return t[e.attributes.name.value]=e.value}),!t.title||!t.author)throw Error("Wrong data");t.id?((0,n.updateBook)(t),i.default.editItem(t)):(t.id=(0,u.default)(),(0,n.addBook)(t),i.default.addItem(t)),c.clearForm(),setTimeout(function(){return(0,o.default)()},300)}},{key:"render",value:function(){var e=this,t=this.renderHtml().body.firstElementChild,r=t.querySelector(".ui.buttons");r.appendChild(this.renderSubmitBtn()),r.appendChild(this.renderBtnDivider()),r.appendChild(this.renderCancelBtn()),t.onsubmit=function(t){return e.onFormSubmit(t)},this.elem=t}}],[{key:"clearForm",value:function(){Array.from(document.querySelectorAll(".bookForm input")).forEach(function(e){return e.value=""}),a.default.unselectAllItems()}}]),c}();exports.default=h;
},{"../../../templates":"b8tB","../UI/Component":"bC/8","../UI/FormButton":"JEhM","../../db":"XDY4","../../functions/toggleLoading":"1m/B","../../functions/generateID":"KQeS","../BookList":"0cqi","../BookList/BookItem":"JZw7"}],"d6sW":[function(require,module,exports) {
"use strict";var e=n(require("./components/BookForm")),o=n(require("./components/BookList"));function n(e){return e&&e.__esModule?e:{default:e}}document.addEventListener("DOMContentLoaded",function(){console.log("Window loaded");var n=document.querySelector("#root main"),t=(new e.default).getElem();n.appendChild(t);var d=(new o.default).getElem();n.appendChild(d)});
},{"./components/BookForm":"T+3q","./components/BookList":"0cqi"}]},{},["d6sW"], null)